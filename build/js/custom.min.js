!function(e){e(document).ready(function(){const o=e(".entry-content"),t=e(".entry-title"),n=e(".source");let r="";e("#new-quote-button").on("click",function(s){s.preventDefault(),r=document.URL,e.ajax({method:"GET",url:qod_vars.rest_url+"wp/v2/posts?filter[orderby]=rand&filter[posts_per_page]=1"}).done(function(e){o.empty(),t.empty(),n.empty();const r=e[0];let s=r._qod_quote_source,u=r._qod_quote_source_url;o.append(r.content.rendered),""===r._qod_quote_source?t.append("&mdash; "+r.title.rendered):(t.append("&mdash; "+r.title.rendered+"&#44; "),n.append(` <a href="${u}">${s}</a>`)),history.pushState(null,null,qod_vars.home_url+"/"+r.slug)}).fail(function(){o.empty(),o.append("Sorry there was an error. Please try again."),console.log("error")})}),e(window).on("popstate",function(){window.location.replace(r)}),e("#quote-submission-form").on("submit",function(o){o.preventDefault(),e(this).prop("disabled",!0),function(){let o=e("#quote-author").val();const t=e("#quote-content").val(),n=e("#quote-source").val(),r=e("#quote-source-url").val();""==o&&""!=t&&(o="Anonymous");e.ajax({method:"POST",url:qod_vars.rest_url+"wp/v2/posts",data:{title:o,content:t,_qod_quote_source:n,_qod_quote_source_url:r},beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",qod_vars.nonce)}}).done(function(){console.log("sent!"),e(".quote-submission-wrapper").slideUp(700),e(".quote-submission").append("<p>Thanks, your quote submission was received!</p>")}).fail(function(){console.log("something went wrong"),e("html, body").animate({scrollTop:0},""),""===t&&(e("#quote-author").focus(),e(".entry-title").append('<p class="fail-msg"><span>*</span> Please enter the fields to submit a quote.</p>'))})}()})})}(jQuery);