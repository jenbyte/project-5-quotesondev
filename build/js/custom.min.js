!function(e){e(document).ready(function(){const o=e(".entry-content"),t=e(".entry-title"),n=e(".source");let u="";e("#new-quote-button").on("click",function(r){r.preventDefault(),u=document.URL,e.ajax({method:"GET",url:qod_vars.rest_url+"wp/v2/posts?filter[orderby]=rand&filter[posts_per_page]=1"}).done(function(e){o.empty(),t.empty(),n.empty();let u=e[0]._qod_quote_source,r=e[0]._qod_quote_source_url;const s=e[0];o.append(e[0].content.rendered),""===s._qod_quote_source?t.append("&mdash; "+e[0].title.rendered):(t.append("&mdash; "+e[0].title.rendered+"&#44; "),n.append(` <a href="${r}">${u}</a>`)),history.pushState(null,null,qod_vars.home_url+"/"+s.slug)}).fail(function(e){console.log("error")})}),e(window).on("popstate",function(){window.location.replace(u)}),e("#quote-submission-form").on("submit",function(o){o.preventDefault(),function(){const o=e("#quote-author").val(),t=e("#quote-content").val(),n=e("#quote-source").val(),u=e("#quote-source-url").val();e.ajax({method:"POST",url:qod_vars.rest_url+"wp/v2/posts",data:{title:o,content:t,_qod_quote_source:n,_qod_quote_source_url:u},beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",qod_vars.nonce)}}).done(function(e){console.log("sent!")}).fail(function(){console.log("something went wrong")})}()})})}(jQuery);